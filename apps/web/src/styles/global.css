@layer reset, base, components, utilities;

@layer reset {
  *, *::before, *::after { box-sizing: border-box; }
  html, body, #root { height: 100%; }
  body { margin: 0; }
}

@layer base {
  :root {
    --nav-height: 64px;
    /* Light theme tokens */
    --color-bg: #f8fafc;
    --color-surface: #ffffff;
    --color-text: #0f172a;
    --color-muted: #475569;
    --color-primary: #0ea5e9;
    --color-primary-strong: #0284c7;
    --color-border: #e2e8f0;
    --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
    --shadow-md: 0 8px 24px rgba(0,0,0,.08);
    --font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
    --font-size: 16px;
  }
  html { scroll-behavior: smooth; scroll-padding-top: calc(var(--nav-height) + 8px); color-scheme: light dark; }
  :root[data-theme="dark"] {
    --color-bg: #0b1220;
    --color-surface: #0f172a;
    --color-text: #e2e8f0;
    --color-muted: #94a3b8;
    --color-primary: #38bdf8;
    --color-primary-strong: #0ea5e9;
    --color-border: #1f2937;
    --shadow-sm: 0 1px 2px rgba(0,0,0,.4);
    --shadow-md: 0 8px 24px rgba(0,0,0,.5);
  }
  :root[data-font-family="serif"] { --font-family: ui-serif, Georgia, Cambria, 'Times New Roman', Times, serif; }
  :root[data-font-scale="90"] { --font-size: 14.4px; }
  :root[data-font-scale="100"] { --font-size: 16px; }
  :root[data-font-scale="110"] { --font-size: 17.6px; }
  :root[data-font-scale="120"] { --font-size: 19.2px; }
  .visually-hidden-focusable {
    position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden;
  }
  .visually-hidden-focusable:focus { position: static; width: auto; height: auto; }
}

@layer components {
  .nav {
    display: flex; align-items: center; gap: 12px; height: var(--nav-height);
  }
  .nav-links { display: flex; gap: 8px; align-items: center; }
  .nav a { text-decoration: none; color: inherit; }
  .tab { padding: 8px 14px; border-radius: 10px; border: 1px solid #e2e8f0; background: #fff; }
  .tab.active { background: #0ea5e9; color: #fff; border-color: transparent; }
  /* Respect theme */
  body {
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--font-family);
    font-size: var(--font-size);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .card { background: var(--color-surface); border-color: var(--color-border); }
  .btn { background: var(--color-surface); border-color: var(--color-border); }
  .btn-primary { background: var(--color-primary); }

  /* Mobile nav */
  .mobile-toggle { display: none; }
  @media (max-width: 900px) {
    .mobile-toggle { display: inline-flex; }
    .nav-links { display: none; position: absolute; right: 16px; top: calc(var(--nav-height) + 8px); background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 10px; padding: 8px; box-shadow: var(--shadow-md); }
    .nav-links[data-open="true"] { display: flex; flex-direction: column; }
  }

  /* Tooltip */
  .tooltip { position: relative; }
  .tooltip-content { position: absolute; left: 50%; transform: translateX(-50%); bottom: calc(100% + 8px); background: var(--color-surface); color: var(--color-text); border: 1px solid var(--color-border); padding: 6px 8px; border-radius: 8px; box-shadow: var(--shadow-sm); white-space: nowrap; font-size: 12px; }

  /* Toast */
  .toast-container { position: fixed; right: 16px; bottom: 16px; display: grid; gap: 8px; z-index: 50; }
  .toast { border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); padding: 10px 12px; border-radius: 10px; box-shadow: var(--shadow-md); }
  .toast.success { border-color: #16a34a; }
  .toast.error { border-color: #ef4444; }

  /* Skeleton */
  .skeleton { position: relative; overflow: hidden; background: rgba(148,163,184,.2); border-radius: 8px; }
  .skeleton::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent); transform: translateX(-100%); animation: shimmer 1.6s infinite; }
  @keyframes shimmer { 100% { transform: translateX(100%); } }

  /* Spinner */
  .spinner { width: 16px; height: 16px; border: 2px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 0.8s linear infinite; }
  /* Popover */
  .popover { position: absolute; right: 16px; top: calc(var(--nav-height) + 8px); background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 10px; padding: 12px; box-shadow: var(--shadow-md); z-index: 40; min-width: 260px; }
  .row { display: flex; align-items: center; justify-content: space-between; gap: 8px; margin: 6px 0; }
  .select { padding: 8px 10px; border-radius: 8px; border: 1px solid var(--color-border); background: var(--color-surface); color: inherit; }

  /* Dashboard layout */
  .dash { display: grid; grid-template-columns: 240px 1fr; gap: 16px; }
  .sidebar { position: sticky; top: calc(var(--nav-height) + 12px); align-self: start; }
  .side-link { display: block; padding: 10px 12px; border-radius: 8px; color: inherit; text-decoration: none; }
  .side-link.active { background: rgba(56,189,248,.15); }
  .breadcrumbs { font-size: 14px; color: var(--color-muted); margin-bottom: 8px; }
  @media (max-width: 1000px) {
    .dash { grid-template-columns: 1fr; }
    .sidebar { position: static; }
    .side-inline { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 6px; }
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; scroll-behavior: auto !important; }
  }
}

@layer utilities {
  .max-w-full { max-width: 100%; }
  .w-full { width: 100%; }
  .flex { display: flex; }
  .items-center { align-items: center; }
  .justify-between { justify-content: space-between; }
  .gap-2 { gap: 8px; }
  .gap-3 { gap: 12px; }
  .p-4 { padding: 16px; }
  .px-4 { padding-inline: 16px; }
}


